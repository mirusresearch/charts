apiVersion: v1
kind: ConfigMap
metadata:
  name: vault-config
  namespace: "{{ template "namespace" . }}"
data: 
  vault-config.hcl : |
    backend "consul" {
      address = "consul-svc:8500"
      redirect_addr = "https://{{ .Values.ingress.domain }}:80"
      path = "vault"
    }

    cluster_name = "{{ template "fullname" . }}"
    
    listener "tcp" {
      address = "0.0.0.0:80"
      tls_disable = 1
    }
